<div class="row">
  <div class="col-lg-12">
    <h1 class="page-header">Listing Books</h1>
  </div>
</div>

<div class="panel panel-default">
  <div class="panel-heading">
    <div class="dt-buttons btn-group">
      <a class="btn btn-default" data-toggle="modal" data-target="#checkInModal">
        <span>Check In</span>
      </a>
      <a class="btn btn-default" data-toggle="modal" data-target="#checkOutModal">
        <span>Check Out</span>
      </a>
    </div>
    <a class="btn btn-default" data-toggle="modal" data-target="#showModal">
      <span>Show</span>
    </a>
    <div class="dt-buttons btn-group">
      <a class="btn btn-default" data-toggle="modal" data-target="#newModal">
        <span>New</span>
      </a>
      <a class="btn btn-default" data-toggle="modal" data-target="#editModal">
        <span>Edit</span>
      </a>
      <a class="btn btn-default" data-toggle="modal" data-target="#deleteModal">
        <span>Delete</span>
      </a>
    </div>
  </div>
  <div class="panel-body">
    <div class="dataTable_wrapper">
      <table class="table table-striped table-bordered table-hover" id="books" style="width: 100%;">
        <thead>
          <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Author</th>
            <th>ISBN-10</th>
            <th>Publish Date</th>
            <th>Genre</th>
            <th>Fiction?</th>
            <th>ISBN-13</th>
            <th>Rating</th>
          </tr>
        </thead>
        <tbody>
          <% @books.each do |book| %>
            <tr>
              <td><%= book.id %></td>
              <td><%= book.title %></td>
              <td><%= book.author_first_name + " " + book.author_last_name %></td>
              <td><%= book.isbn_10 %></td>
              <td><%= book.publish_date %></td>
              <td><%= book.genre.name %></td>
              <td><%= book.is_fiction %></td>
              <td><%= book.isbn_13 %></td>
              <td><%= book.rating %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- New Book Modal -->
<div class="fade modal" id="newModal" tabindex="-1" role="dialog" aria-labelledby="newModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title" id="newModalLabel">New Book</h4>
      </div>
      <div class="modal-body">
        <%= render 'form' %>
      </div>
    </div>
  </div>
</div>

<% if @current_book then %>
  <!-- Check In Book Modal -->
  <div class="fade modal" id="checkInModal" tabindex="-1" role="dialog" aria-labelledby="checkInModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h4 class="modal-title" id="editModalLabel"><%= @current_book.title %></h4>
          </div>
          <div class="modal-body">
            Form to check in a book.
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div>
      </div>
    </div>
  </div>

  <!-- Check Out Book Modal -->
  <div class="fade modal" id="checkOutModal" tabindex="-1" role="dialog" aria-labelledby="checkOutModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h4 class="modal-title" id="editModalLabel"><%= @current_book.title %></h4>
          </div>
          <div class="modal-body">
            Form to check out a book.
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div>
      </div>
    </div>
  </div>

  <!-- Edit Book Modal -->
  <div class="fade modal" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h4 class="modal-title" id="editModalLabel">Edit Book</h4>
          </div>
          <div class="modal-body">
            Form to edit book.
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div>
      </div>
    </div>
  </div>

  <!-- Delete Book Modal -->
  <div class="fade modal" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
            <h4 class="modal-title" id="deleteModalLabel">Delete Book</h4>
          </div>
          <div class="modal-body">
            Are you sure you want to delete this book?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" id="deleteModalConfirm">Confirm</button>
          </div>
      </div>
    </div>
  </div>

  <!-- Show Book Modal -->
  <div class="fade modal" id="showModal" tabindex="-1" role="dialog" aria-labelledby="showModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
            <h4 class="modal-title" id="showModalLabel"><%= @current_book.title %></h4>
          </div>
          <div class="modal-body">
            <%= @current_book.id %>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
          </div>
      </div>
    </div>
  </div>
<% end %>
